<input type='submit' value='Submit' form='form-itable' id="form-itable-submit">

<script>
	console.log('executing form script')
	var submitForm = function(event){
		event.preventDefault();
		$submitButton = $(event.target).parent().find('#form-itable-submit');
		$submitButton.attr({disabled: 'true', value: 'Submitting..'});
		$(event.target).off('submit');
		console.log('attempting to submit form');
		var formData = $(this).serialize();

		$.ajax({
			url:'/results',
			type: 'POST',
			data: formData,
			success: function(response, response2, response3){
				console.log(response);
				console.log(response2);
				console.log(response3);
				
				// console.log('submission successful, redirecting to ' + url)
				// window.location.href = url;
			},
			error: function(){
				console.log('submission unsuccessful')
				$(event.target).on('submit', function(event){
					submitForm(event);
				});
				$submitButton.removeAttr('disabled').val('Submit');
			}
		});
	}
	$(function(){
		$('.form-edit-box form').on('submit', function(event){
			submitForm(event);
		})
	});

</script>